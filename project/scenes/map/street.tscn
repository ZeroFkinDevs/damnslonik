[gd_scene load_steps=55 format=3 uid="uid://dfhav06mxxqam"]

[ext_resource type="Script" uid="uid://gs8j4rfgkmtn" path="res://scripts/effects/fixed_parallax.gd" id="1_0cpq3"]
[ext_resource type="Texture2D" uid="uid://sadpx7gtolb3" path="res://resources/textures/map/bg.png" id="1_xf031"]
[ext_resource type="Texture2D" uid="uid://d1wb76lbbs4oc" path="res://resources/textures/light.png" id="2_hjkjg"]
[ext_resource type="Texture2D" uid="uid://d4ho87kgfmv73" path="res://resources/textures/map/street/street.png" id="3_pbn5g"]
[ext_resource type="Script" uid="uid://je6530bv1g7q" path="res://scripts/entity/player/player_spawner.gd" id="4_cmb6x"]
[ext_resource type="Script" uid="uid://b5cpkqujdl1hu" path="res://scripts/entity/interactive/hatch.gd" id="5_8q7ur"]
[ext_resource type="Texture2D" uid="uid://cdqdup1iv4sk5" path="res://resources/textures/map/street/street_without_bg.png" id="5_cmb6x"]
[ext_resource type="Script" uid="uid://bmpqxq338duho" path="res://scripts/entity/interactive/door.gd" id="5_xxo4l"]
[ext_resource type="Script" uid="uid://ckq526nxnm7gw" path="res://scripts/entity/triggers/narrative_trigger.gd" id="6_0cpq3"]
[ext_resource type="Script" uid="uid://btptyxeygt3b1" path="res://scripts/narrative/street/start_lamp_narrative.gd" id="6_0usm1"]
[ext_resource type="Script" uid="uid://ce0r2tnjo1mvu" path="res://scripts/entity/triggers/rigidbody_trigger.gd" id="6_bey3e"]
[ext_resource type="Texture2D" uid="uid://bgu6pelrxc83y" path="res://resources/textures/rain_drop.png" id="6_oesqg"]
[ext_resource type="Script" uid="uid://brpgurmger6ol" path="res://scripts/entity/interactive/ladder.gd" id="7_a7ivt"]
[ext_resource type="Script" uid="uid://buftb2secsi62" path="res://scripts/entity/triggers/map_teleport_trigger.gd" id="7_gs6ay"]
[ext_resource type="Script" uid="uid://dstlmxl1weurm" path="res://scripts/narrative/street/street_wet_narrative.gd" id="8_axxfu"]
[ext_resource type="PackedScene" uid="uid://bfm3jsvq3cshm" path="res://scenes/objects/interactive/story_drop.tscn" id="11_8q7ur"]
[ext_resource type="Script" uid="uid://btjg7vamnmrgv" path="res://scripts/narrative/story_drops/story_drops_manager.gd" id="13_a7ivt"]
[ext_resource type="AudioStream" uid="uid://d2htwecv4aggy" path="res://resources/audio/music/street_shop.ogg" id="15_gs6ay"]
[ext_resource type="Script" uid="uid://cls6x3ngtus4j" path="res://scripts/effects/post_processing_node.gd" id="19_ih1jb"]

[sub_resource type="Environment" id="Environment_xxo4l"]
glow_enabled = true
glow_intensity = 4.61
glow_strength = 1.64

[sub_resource type="AtlasTexture" id="AtlasTexture_cmb6x"]
atlas = ExtResource("5_cmb6x")
region = Rect2(43.01529, 27.907654, 546.61523, 653.79474)

[sub_resource type="AtlasTexture" id="AtlasTexture_aj2qc"]
atlas = ExtResource("5_cmb6x")
region = Rect2(646.9999, 515.99994, 124, 148.00006)

[sub_resource type="AtlasTexture" id="AtlasTexture_axxfu"]
atlas = ExtResource("5_cmb6x")
region = Rect2(43.01529, 550.4522, 546.61523, 131.25018)

[sub_resource type="AtlasTexture" id="AtlasTexture_0cpq3"]
atlas = ExtResource("5_cmb6x")
region = Rect2(811.9734, 2.9742508, 309.8462, 728.6548)

[sub_resource type="AtlasTexture" id="AtlasTexture_0usm1"]
atlas = ExtResource("5_cmb6x")
region = Rect2(1705.8359, 281.85095, 732.7822, 471.87964)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ih1jb"]
size = Vector2(161.8772, 134.89769)

[sub_resource type="AtlasTexture" id="AtlasTexture_bey3e"]
atlas = ExtResource("5_cmb6x")
region = Rect2(1793.3494, 181.31342, 75.107666, 88.63641)

[sub_resource type="AtlasTexture" id="AtlasTexture_xxo4l"]
atlas = ExtResource("5_cmb6x")
region = Rect2(1864.6167, 167.1817, 72.09668, 99.23889)

[sub_resource type="AtlasTexture" id="AtlasTexture_ih1jb"]
atlas = ExtResource("5_cmb6x")
region = Rect2(1937.262, 181.982, 70.40015, 82.699036)

[sub_resource type="AtlasTexture" id="AtlasTexture_w6it0"]
atlas = ExtResource("5_cmb6x")
region = Rect2(2004.7024, 177.32208, 55.980957, 77.60988)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0usm1"]
size = Vector2(20, 321)

[sub_resource type="AtlasTexture" id="AtlasTexture_sks65"]
atlas = ExtResource("5_cmb6x")
region = Rect2(2070.0122, 168.4134, 94.57373, 81.85086)

[sub_resource type="AtlasTexture" id="AtlasTexture_d0rfv"]
atlas = ExtResource("5_cmb6x")
region = Rect2(2163.313, 160.35924, 68.27954, 82.699066)

[sub_resource type="AtlasTexture" id="AtlasTexture_71np3"]
atlas = ExtResource("5_cmb6x")
region = Rect2(2228.1958, 158.66228, 59.373535, 83.12315)

[sub_resource type="AtlasTexture" id="AtlasTexture_2syoe"]
atlas = ExtResource("5_cmb6x")
region = Rect2(2281.213, 156.11739, 50.0437, 84.81955)

[sub_resource type="AtlasTexture" id="AtlasTexture_w5irg"]
atlas = ExtResource("5_cmb6x")
region = Rect2(2329.1316, 162.47595, 40.289307, 87.36412)

[sub_resource type="AtlasTexture" id="AtlasTexture_lotdk"]
atlas = ExtResource("5_cmb6x")
region = Rect2(2365.7966, 157.46196, 51.367188, 115.71727)

[sub_resource type="AtlasTexture" id="AtlasTexture_gs6ay"]
atlas = ExtResource("5_cmb6x")
region = Rect2(603.91064, 74.27428, 214.54553, 331.15118)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gs6ay"]
size = Vector2(79.49829, 27.65149)

[sub_resource type="AtlasTexture" id="AtlasTexture_a7ivt"]
atlas = ExtResource("5_cmb6x")
region = Rect2(1183.8535, 472.47717, 76.76172, 128.07745)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7jigp"]
size = Vector2(47.526123, 55.30311)

[sub_resource type="AtlasTexture" id="AtlasTexture_8q7ur"]
atlas = ExtResource("5_cmb6x")
region = Rect2(1166.2908, 647.0247, 122.60278, 44.337463)

[sub_resource type="Animation" id="Animation_8q7ur"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Node2D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ladder:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-0.86413574, 96.78047)]
}

[sub_resource type="Animation" id="Animation_a7ivt"]
resource_name = "close"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Node2D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 0.5, 0.7),
"transitions": PackedFloat32Array(1.2311442, 0.20306355, 2.219139, 0.51763254),
"update": 0,
"values": [1.748819910498318, 0.0, 0.2642021, 0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ladder:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-0.864, -40), Vector2(-0.864, 96.78)]
}

[sub_resource type="Animation" id="Animation_aj2qc"]
resource_name = "open"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Node2D:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, 1.8143518, 1.7483643]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ladder:position")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2, 1),
"transitions": PackedFloat32Array(1, 0.2973018, 1),
"update": 0,
"values": [Vector2(-0.86413574, 96.78047), Vector2(-0.86413574, 96.78047), Vector2(-0.864, -40)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_7jigp"]
_data = {
&"RESET": SubResource("Animation_8q7ur"),
&"close": SubResource("Animation_a7ivt"),
&"open": SubResource("Animation_aj2qc")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a7ivt"]
size = Vector2(120.975586, 102.829254)

[sub_resource type="AtlasTexture" id="AtlasTexture_oesqg"]
atlas = ExtResource("3_pbn5g")
region = Rect2(-23.4953, 773.307, 1631.2715, 248.65631)

[sub_resource type="AtlasTexture" id="AtlasTexture_7jigp"]
atlas = ExtResource("5_cmb6x")
region = Rect2(1320.8164, 484.63928, 367.27295, 254.54553)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8q7ur"]
size = Vector2(114, 109)

[sub_resource type="AtlasTexture" id="AtlasTexture_wfxgy"]
atlas = ExtResource("5_cmb6x")
region = Rect2(281.34372, 1119.9208, 370.90518, 389.0614)

[sub_resource type="AtlasTexture" id="AtlasTexture_bnev2"]
atlas = ExtResource("5_cmb6x")
region = Rect2(84.22055, 1062.8582, 121.905945, 578.4048)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_oesqg"]
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(700, 1, 1)
angle_min = -39.99999
angle_max = -39.99999
direction = Vector3(-1, 1, 0)
spread = 5.103
initial_velocity_min = 100.0
initial_velocity_max = 100.0
gravity = Vector3(0, 0, 0)
scale_min = 0.099999994
scale_max = 0.5

[sub_resource type="GDScript" id="GDScript_aj2qc"]
resource_name = "drop-1"
script/source = "extends NarrativeNode

func execute():
	var dialog = Global.get_dialog_manager()
	
	NarrativeManager.start_preparing_new_units()
	NarrativeManager.append_unit({
		\"method\": func():
			dialog.clear_characters()
			dialog.set_character(\"boss\", \"idle\", -1)
			dialog.set_character(\"stag\", \"idle\", 1)
			dialog.print_text(\"boss\", \"привет\")
			if await dialog.start_dialog_step():
				NarrativeManager.execute_next()
	})
	NarrativeManager.execute_prepared()
"

[node name="TestLocation" type="Node2D"]
texture_filter = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_xxo4l")

[node name="background" type="Node2D" parent="."]

[node name="CanvasModulate" type="CanvasModulate" parent="background"]
color = Color(0.29954746, 0.29954746, 0.29954743, 1)

[node name="Parallax2D" type="Parallax2D" parent="background"]
scroll_scale = Vector2(0.8, 0.8)
script = ExtResource("1_0cpq3")

[node name="Bg" type="Sprite2D" parent="background/Parallax2D"]
visible = false
position = Vector2(627, 481)
scale = Vector2(2.6693118, 2.669312)
texture = ExtResource("1_xf031")

[node name="Sprite2D3" type="Sprite2D" parent="background/Parallax2D"]
modulate = Color(0.2592937, 0.2592937, 0.25929365, 1)
position = Vector2(405, 340)
texture = SubResource("AtlasTexture_cmb6x")

[node name="Sprite2D4" type="Sprite2D" parent="background/Parallax2D"]
modulate = Color(0.2592937, 0.2592937, 0.25929365, 1)
position = Vector2(967, 335)
texture = SubResource("AtlasTexture_cmb6x")

[node name="Sprite2D5" type="Sprite2D" parent="background/Parallax2D"]
modulate = Color(0.2592937, 0.2592937, 0.25929365, 1)
position = Vector2(1619, 547)
texture = SubResource("AtlasTexture_cmb6x")

[node name="Sprite2D6" type="Sprite2D" parent="background/Parallax2D"]
modulate = Color(0.2592937, 0.2592937, 0.25929365, 1)
position = Vector2(2121, 544)
texture = SubResource("AtlasTexture_cmb6x")

[node name="Sprite2D7" type="Sprite2D" parent="background/Parallax2D"]
modulate = Color(0.2592937, 0.2592937, 0.25929365, 1)
position = Vector2(2617, 541)
texture = SubResource("AtlasTexture_cmb6x")

[node name="PointLight2D2" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(1026, 356)
energy = 1.84
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="PointLight2D5" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(1620, 610)
energy = 1.84
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="PointLight2D7" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(2100, 648)
energy = 1.1
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="PointLight2D8" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(2596, 645)
energy = 1.1
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="PointLight2D6" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(2901, 498)
energy = 1.84
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="PointLight2D4" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(3278, 694.5)
scale = Vector2(0.33503938, 0.33503938)
energy = 1.84
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="PointLight2D3" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(660, -118)
energy = 1.84
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="PointLight2D" type="PointLight2D" parent="background"]
texture_filter = 1
position = Vector2(335, 362)
color = Color(1, 0.77254903, 0.5019608, 1)
energy = 1.7
shadow_enabled = true
texture = ExtResource("2_hjkjg")
texture_scale = 1.27

[node name="Sprite2D" type="Sprite2D" parent="background"]
modulate = Color(0.5132329, 0.5132329, 0.5132329, 1)
position = Vector2(3254, 415.5)
texture = SubResource("AtlasTexture_cmb6x")

[node name="Sprite2D3" type="Sprite2D" parent="background"]
modulate = Color(0.5132329, 0.5132329, 0.5132329, 1)
position = Vector2(3111.75, 628.5)
scale = Vector2(1.157258, 1.1572583)
texture = SubResource("AtlasTexture_aj2qc")

[node name="Sprite2D4" type="Sprite2D" parent="background"]
modulate = Color(0.5132329, 0.5132329, 0.5132329, 1)
position = Vector2(3436, 628.5)
scale = Vector2(1.157258, 1.1572583)
texture = SubResource("AtlasTexture_aj2qc")

[node name="StaticBody2D4" type="StaticBody2D" parent="background"]
position = Vector2(769, 192)
scale = Vector2(1.1860842, 1.1860842)

[node name="Sprite2D2" type="Sprite2D" parent="background/StaticBody2D4"]
modulate = Color(0.5132329, 0.5132329, 0.5132329, 1)
position = Vector2(-83.46796, 77.56618)
scale = Vector2(0.8431105, 0.8431105)
texture = SubResource("AtlasTexture_cmb6x")

[node name="Sprite2D4" type="Sprite2D" parent="background/StaticBody2D4"]
position = Vector2(-83.46796, 295.93176)
scale = Vector2(0.8431105, 0.8431105)
texture = SubResource("AtlasTexture_axxfu")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="background/StaticBody2D4"]
polygon = PackedVector2Array(-297.618, 240.2865, -147.54434, 243.65894, -28.665771, 239.44339, 134.8977, 239.44339, 132.36835, 327.12686, -297.618, 327.96997)

[node name="Sprite2D5" type="Sprite2D" parent="background"]
position = Vector2(1265.0001, 391.00003)
scale = Vector2(1.1860842, 1.1860842)
texture = SubResource("AtlasTexture_0cpq3")
flip_h = true

[node name="Sprite2D6" type="Sprite2D" parent="background"]
position = Vector2(2101, 606)
scale = Vector2(1.1860842, 1.1860842)
texture = SubResource("AtlasTexture_0usm1")

[node name="InteractiveArea" type="Area2D" parent="background/Sprite2D6" node_paths=PackedStringArray("display_point")]
position = Vector2(-4.2155523, 124.78036)
collision_layer = 2
collision_mask = 2
script = ExtResource("5_xxo4l")
map_code = "shop"
spawn_code = "shop_entrance"
label = "Shop"
display_point = NodePath(".")
metadata/_custom_type_script = "uid://85bbajjok1x5"

[node name="CollisionShape2D" type="CollisionShape2D" parent="background/Sprite2D6/InteractiveArea"]
position = Vector2(-0.84313965, 1.6862183)
shape = SubResource("RectangleShape2D_ih1jb")

[node name="Sprite2D7" type="Sprite2D" parent="background"]
position = Vector2(1886, 543)
scale = Vector2(0.9298545, 0.9298545)
texture = SubResource("AtlasTexture_bey3e")

[node name="Sprite2D8" type="Sprite2D" parent="background"]
position = Vector2(1934.0001, 537.00006)
scale = Vector2(0.6821496, 0.6821496)
texture = SubResource("AtlasTexture_xxo4l")

[node name="StaticBody2D2" type="StaticBody2D" parent="background"]
position = Vector2(174.00002, 177)
scale = Vector2(1.1860842, 1.1860842)

[node name="Sprite2D2" type="Sprite2D" parent="background/StaticBody2D2"]
texture = SubResource("AtlasTexture_0cpq3")

[node name="Sprite2D3" type="Sprite2D" parent="background/StaticBody2D2"]
position = Vector2(-182.1119, 0)
texture = SubResource("AtlasTexture_0cpq3")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="background/StaticBody2D2"]
polygon = PackedVector2Array(27.822647, 332.18555, -133.21147, 331.34244, -136.58391, -355.79263, 62.390167, -360.00818, 90.212814, 141.64255, 145.85812, 139.95633, 146.70123, 167.77899, 26.136414, 172.83765)

[node name="PlayerSpawner" type="Node2D" parent="."]
position = Vector2(482.00003, 399.00003)
scale = Vector2(0.436, 0.436)
script = ExtResource("4_cmb6x")
code = "street_start"

[node name="PlayerSpawner2" type="Node2D" parent="."]
position = Vector2(3282, 593.5)
scale = Vector2(0.436, 0.436)
script = ExtResource("4_cmb6x")
code = "street_hatch_0"

[node name="PlayerSpawner3" type="Node2D" parent="."]
position = Vector2(2096.0002, 755)
scale = Vector2(0.436, 0.436)
script = ExtResource("4_cmb6x")
code = "street_shop"

[node name="foreground" type="Node2D" parent="."]
z_index = 2

[node name="Sprite2D9" type="Sprite2D" parent="foreground"]
position = Vector2(1983.0001, 536)
scale = Vector2(0.80874324, 0.80874324)
texture = SubResource("AtlasTexture_ih1jb")

[node name="RigidBody2D2" type="RigidBody2D" parent="foreground"]
position = Vector2(2030, 537)
collision_layer = 0
collision_mask = 4

[node name="Sprite2D10" type="Sprite2D" parent="foreground/RigidBody2D2"]
position = Vector2(0, -1)
scale = Vector2(0.80874336, 0.80874336)
texture = SubResource("AtlasTexture_w6it0")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/RigidBody2D2"]
scale = Vector2(0.80874336, 0.80874336)
polygon = PackedVector2Array(-21.020264, -11.128418, -2.4729004, -25.966248, 18.547363, -18.547302, 19.783936, 8.6553955, 9.89209, 21.020264, -16.074219, 17.310791)

[node name="Area2D2" type="Area2D" parent="foreground/RigidBody2D2" node_paths=PackedStringArray("rigidbody")]
position = Vector2(-1, 0)
script = ExtResource("6_bey3e")
rigidbody = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/RigidBody2D2/Area2D2"]
position = Vector2(0, 150.5)
shape = SubResource("RectangleShape2D_0usm1")

[node name="RigidBody2D3" type="RigidBody2D" parent="foreground"]
position = Vector2(2090, 529)
collision_layer = 0
collision_mask = 4

[node name="Sprite2D11" type="Sprite2D" parent="foreground/RigidBody2D3"]
position = Vector2(-3, 3)
scale = Vector2(0.80874336, 0.80874336)
texture = SubResource("AtlasTexture_sks65")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/RigidBody2D3"]
scale = Vector2(0.80874336, 0.80874336)
polygon = PackedVector2Array(-30.91211, -17.310791, 0, -21.020264, 34.621582, -14.83783, 38.331055, 25.966187, -1.2363281, 27.202698, -38.331055, 24.729736)

[node name="Area2D3" type="Area2D" parent="foreground/RigidBody2D3" node_paths=PackedStringArray("rigidbody")]
position = Vector2(0, 2)
script = ExtResource("6_bey3e")
rigidbody = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/RigidBody2D3/Area2D3"]
position = Vector2(0, 150.5)
shape = SubResource("RectangleShape2D_0usm1")

[node name="RigidBody2D4" type="RigidBody2D" parent="foreground"]
position = Vector2(2149, 531)
collision_layer = 0
collision_mask = 4

[node name="Sprite2D12" type="Sprite2D" parent="foreground/RigidBody2D4"]
position = Vector2(-1, 1)
scale = Vector2(0.80874336, 0.80874336)
texture = SubResource("AtlasTexture_d0rfv")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/RigidBody2D4"]
scale = Vector2(0.80874336, 0.80874336)
polygon = PackedVector2Array(-28.439209, -18.547302, -11.128174, -29.67566, 17.310791, -25.966187, 28.439209, 19.783813, -2.4729004, 32.14862, -22.256592, 18.547302)

[node name="Area2D4" type="Area2D" parent="foreground/RigidBody2D4" node_paths=PackedStringArray("rigidbody")]
position = Vector2(-1, 1)
script = ExtResource("6_bey3e")
rigidbody = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/RigidBody2D4/Area2D4"]
position = Vector2(0, 150.5)
shape = SubResource("RectangleShape2D_0usm1")

[node name="RigidBody2D5" type="RigidBody2D" parent="foreground"]
position = Vector2(2192, 531)
collision_layer = 0
collision_mask = 4

[node name="Sprite2D13" type="Sprite2D" parent="foreground/RigidBody2D5"]
position = Vector2(0, -1)
scale = Vector2(0.80874336, 0.80874336)
texture = SubResource("AtlasTexture_71np3")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/RigidBody2D5"]
scale = Vector2(0.80874336, 0.80874336)
polygon = PackedVector2Array(-22.256592, -11.128357, -4.945801, -30.91217, 8.655518, -29.67566, 22.256836, -12.364868, 4.946045, 29.67566, -7.4189453, 29.67566)

[node name="Area2D4" type="Area2D" parent="foreground/RigidBody2D5" node_paths=PackedStringArray("rigidbody")]
position = Vector2(-1, 1)
script = ExtResource("6_bey3e")
rigidbody = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/RigidBody2D5/Area2D4"]
position = Vector2(0, 150.5)
shape = SubResource("RectangleShape2D_0usm1")

[node name="RigidBody2D6" type="RigidBody2D" parent="foreground"]
position = Vector2(2235, 530)
collision_layer = 0
collision_mask = 4

[node name="Sprite2D14" type="Sprite2D" parent="foreground/RigidBody2D6"]
position = Vector2(0, 1)
scale = Vector2(0.80874336, 0.80874336)
texture = SubResource("AtlasTexture_2syoe")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/RigidBody2D6"]
scale = Vector2(0.80874336, 0.80874336)
polygon = PackedVector2Array(-12.364746, -2.4730225, -9.891846, -30.91217, 11.128418, -24.729736, 19.783691, -4.945984, -3.7094727, 34.621582, -14.837891, 34.621582)

[node name="Area2D4" type="Area2D" parent="foreground/RigidBody2D6" node_paths=PackedStringArray("rigidbody")]
position = Vector2(-1, 1)
script = ExtResource("6_bey3e")
rigidbody = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/RigidBody2D6/Area2D4"]
position = Vector2(0, 150.5)
shape = SubResource("RectangleShape2D_0usm1")

[node name="RigidBody2D7" type="RigidBody2D" parent="foreground"]
position = Vector2(2266, 530)
collision_layer = 0
collision_mask = 4

[node name="Sprite2D15" type="Sprite2D" parent="foreground/RigidBody2D7"]
position = Vector2(0, 1)
scale = Vector2(0.80874336, 0.80874336)
texture = SubResource("AtlasTexture_w5irg")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/RigidBody2D7"]
scale = Vector2(0.80874336, 0.80874336)
polygon = PackedVector2Array(-6.182373, -32.14868, 6.182373, -32.14868, 2.4729004, 33.38507, -7.4189453, 33.38507)

[node name="Area2D4" type="Area2D" parent="foreground/RigidBody2D7" node_paths=PackedStringArray("rigidbody")]
position = Vector2(-1, 1)
script = ExtResource("6_bey3e")
rigidbody = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/RigidBody2D7/Area2D4"]
position = Vector2(0, 150.5)
shape = SubResource("RectangleShape2D_0usm1")

[node name="RigidBody2D8" type="RigidBody2D" parent="foreground"]
position = Vector2(2301, 531)
collision_layer = 0
collision_mask = 4

[node name="Sprite2D16" type="Sprite2D" parent="foreground/RigidBody2D8"]
position = Vector2(-3, 3)
scale = Vector2(0.80874336, 0.80874336)
texture = SubResource("AtlasTexture_lotdk")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/RigidBody2D8"]
scale = Vector2(0.80874336, 0.80874336)
polygon = PackedVector2Array(-12.36499, -39.567566, 4.945801, -43.276978, 11.128418, 19.783813, -18.547363, 44.51349)

[node name="Area2D4" type="Area2D" parent="foreground/RigidBody2D8" node_paths=PackedStringArray("rigidbody")]
position = Vector2(-1, 1)
script = ExtResource("6_bey3e")
rigidbody = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/RigidBody2D8/Area2D4"]
position = Vector2(0, 150.5)
shape = SubResource("RectangleShape2D_0usm1")

[node name="Sprite2D6" type="Sprite2D" parent="foreground"]
position = Vector2(332.00003, 389.00003)
scale = Vector2(1.1397711, 1.1397711)
texture = SubResource("AtlasTexture_gs6ay")

[node name="Node" type="Node" parent="foreground/Sprite2D6" node_paths=PackedStringArray("lamp")]
script = ExtResource("6_0usm1")
lamp = NodePath("..")

[node name="hatch" type="Area2D" parent="foreground" node_paths=PackedStringArray("animation_player", "display_point")]
position = Vector2(3280, 685.5)
scale = Vector2(1.157258, 1.1572583)
collision_layer = 2
collision_mask = 2
script = ExtResource("5_8q7ur")
animation_player = NodePath("AnimationPlayer")
label = "hatch"
display_point = NodePath("Node2D/Sprite2D5")
metadata/_custom_type_script = "uid://85bbajjok1x5"

[node name="Trigger" type="Area2D" parent="foreground/hatch"]
position = Vector2(0, 141.71426)
script = ExtResource("7_gs6ay")
map_code = "test_location"
spawn_code = "hatch_0"
metadata/_custom_type_script = "uid://cqx8uin01bujl"

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/hatch/Trigger"]
shape = SubResource("RectangleShape2D_gs6ay")

[node name="ladder" type="Area2D" parent="foreground/hatch" node_paths=PackedStringArray("player_point")]
position = Vector2(-0.86413574, 96.78047)
script = ExtResource("7_a7ivt")
player_point = NodePath("Node2D")

[node name="Sprite2D6" type="Sprite2D" parent="foreground/hatch/ladder"]
modulate = Color(0.5132329, 0.5132329, 0.5132329, 1)
position = Vector2(-0.020885509, -0.80836487)
texture = SubResource("AtlasTexture_a7ivt")
flip_h = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/hatch/ladder"]
position = Vector2(-1.2961426, 67.401306)
shape = SubResource("RectangleShape2D_7jigp")

[node name="Node2D" type="Node2D" parent="foreground/hatch/ladder"]
position = Vector2(-17.282335, 0.00047467055)

[node name="Node2D" type="Node2D" parent="foreground/hatch"]
position = Vector2(54.43903, 14.689893)

[node name="Sprite2D5" type="Sprite2D" parent="foreground/hatch/Node2D"]
modulate = Color(0.5132329, 0.5132329, 0.5132329, 1)
position = Vector2(-55.30314, -17.282227)
texture = SubResource("AtlasTexture_8q7ur")

[node name="AnimationPlayer" type="AnimationPlayer" parent="foreground/hatch"]
libraries = {
&"": SubResource("AnimationLibrary_7jigp")
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/hatch"]
position = Vector2(0, -35.860596)
shape = SubResource("RectangleShape2D_a7ivt")

[node name="StaticBody2D" type="StaticBody2D" parent="foreground/hatch"]
collision_layer = 16
collision_mask = 16

[node name="CollisionShape2D2" type="CollisionShape2D" parent="foreground/hatch/StaticBody2D"]
position = Vector2(0, 164.18118)
shape = SubResource("RectangleShape2D_gs6ay")

[node name="StaticBody2D" type="StaticBody2D" parent="foreground"]
position = Vector2(247, 667)
metadata/_edit_group_ = true

[node name="Sprite2D3" type="Sprite2D" parent="foreground/StaticBody2D"]
position = Vector2(287, 124)
texture = SubResource("AtlasTexture_oesqg")

[node name="Sprite2D2" type="Sprite2D" parent="foreground/StaticBody2D"]
texture = SubResource("AtlasTexture_oesqg")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/StaticBody2D"]
polygon = PackedVector2Array(-817, -101, -586, -99, -247, -93, -31, -97, 162, -97, 307, -95, 482, -94, 813, -104, 814, 119, -815, 120)

[node name="StaticBody2D2" type="StaticBody2D" parent="foreground"]
position = Vector2(1216, 595)
metadata/_edit_group_ = true

[node name="Sprite2D2" type="Sprite2D" parent="foreground/StaticBody2D2"]
texture = SubResource("AtlasTexture_7jigp")
flip_h = true

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/StaticBody2D2"]
scale = Vector2(-1, 1)
polygon = PackedVector2Array(-156, 109, 117, -33, 155, -33, 156, 105)

[node name="StaticBody2D4" type="StaticBody2D" parent="foreground"]
position = Vector2(1506, 736)
metadata/_edit_group_ = true

[node name="Sprite2D2" type="Sprite2D" parent="foreground/StaticBody2D4"]
texture = SubResource("AtlasTexture_7jigp")
flip_h = true

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/StaticBody2D4"]
scale = Vector2(-1, 1)
polygon = PackedVector2Array(-156, 109, 117, -33, 155, -33, 156, 105)

[node name="StaticBody2D6" type="StaticBody2D" parent="foreground"]
position = Vector2(2681, 736)
metadata/_edit_group_ = true

[node name="Sprite2D2" type="Sprite2D" parent="foreground/StaticBody2D6"]
texture = SubResource("AtlasTexture_7jigp")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/StaticBody2D6"]
polygon = PackedVector2Array(-156, 109, 117, -33, 155, -33, 156, 105)

[node name="StaticBody2D5" type="StaticBody2D" parent="foreground"]
position = Vector2(2164, 940)
collision_layer = 5
collision_mask = 5
metadata/_edit_group_ = true

[node name="Sprite2D2" type="Sprite2D" parent="foreground/StaticBody2D5"]
texture = SubResource("AtlasTexture_oesqg")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/StaticBody2D5"]
polygon = PackedVector2Array(-817, -101, -586, -99, -247, -93, -31, -97, 162, -97, 307, -95, 482, -94, 813, -104, 814, 119, -815, 120)

[node name="StaticBody2D7" type="StaticBody2D" parent="foreground"]
position = Vector2(3648, 804)
metadata/_edit_group_ = true

[node name="Sprite2D2" type="Sprite2D" parent="foreground/StaticBody2D7"]
texture = SubResource("AtlasTexture_oesqg")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/StaticBody2D7"]
polygon = PackedVector2Array(-817, -101, -586, -99, -247, -93, -31, -97, 162, -97, 307, -95, 482, -94, 813, -104, 814, 119, -815, 120)

[node name="street_wet_narrative" type="Area2D" parent="foreground" node_paths=PackedStringArray("narrative")]
position = Vector2(879, 391)
script = ExtResource("6_0cpq3")
narrative = NodePath("Narrative")
delay = 3.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="foreground/street_wet_narrative"]
position = Vector2(0, 26.5)
shape = SubResource("RectangleShape2D_8q7ur")

[node name="Narrative" type="Node" parent="foreground/street_wet_narrative"]
script = ExtResource("8_axxfu")

[node name="StaticBody2D3" type="StaticBody2D" parent="foreground"]
position = Vector2(-1208, 667)
metadata/_edit_group_ = true

[node name="Sprite2D2" type="Sprite2D" parent="foreground/StaticBody2D3"]
texture = SubResource("AtlasTexture_oesqg")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="foreground/StaticBody2D3"]
polygon = PackedVector2Array(-817, -101, -586, -99, -247, -93, -31, -97, 162, -97, 307, -95, 482, -94, 813, -104, 814, 119, -815, 120)

[node name="Parallax2D2" type="Parallax2D" parent="foreground"]
scroll_scale = Vector2(1.2, 1.2)
script = ExtResource("1_0cpq3")

[node name="Sprite2D2" type="Sprite2D" parent="foreground/Parallax2D2"]
position = Vector2(762, 586)
texture = SubResource("AtlasTexture_wfxgy")

[node name="Sprite2D" type="Sprite2D" parent="foreground/Parallax2D2"]
position = Vector2(127, 528)
texture = SubResource("AtlasTexture_bnev2")

[node name="Sprite2D3" type="Sprite2D" parent="foreground/Parallax2D2"]
position = Vector2(986, 571)
texture = SubResource("AtlasTexture_bnev2")

[node name="Sprite2D4" type="Sprite2D" parent="foreground/Parallax2D2"]
position = Vector2(1598, 799)
texture = SubResource("AtlasTexture_bnev2")

[node name="Sprite2D6" type="Sprite2D" parent="foreground/Parallax2D2"]
position = Vector2(2623, 770)
texture = SubResource("AtlasTexture_bnev2")
flip_h = true

[node name="Sprite2D5" type="Sprite2D" parent="foreground/Parallax2D2"]
position = Vector2(2910, 712)
texture = SubResource("AtlasTexture_bnev2")
flip_h = true

[node name="GPUParticles2D" type="GPUParticles2D" parent="foreground"]
position = Vector2(1006, -154)
amount = 20
texture = ExtResource("6_oesqg")
lifetime = 10.0
preprocess = 5.13
speed_scale = 7.7
collision_base_size = 0.61
visibility_rect = Rect2(-900, -400, 900, 1200)
process_material = SubResource("ParticleProcessMaterial_oesqg")

[node name="GPUParticles2D2" type="GPUParticles2D" parent="foreground"]
position = Vector2(1973, 104)
amount = 20
texture = ExtResource("6_oesqg")
lifetime = 10.0
preprocess = 5.13
speed_scale = 7.7
collision_base_size = 4.66
visibility_rect = Rect2(-900, -400, 900, 1200)
process_material = SubResource("ParticleProcessMaterial_oesqg")

[node name="GPUParticles2D3" type="GPUParticles2D" parent="foreground"]
position = Vector2(2811, 133)
amount = 20
texture = ExtResource("6_oesqg")
lifetime = 10.0
preprocess = 5.13
speed_scale = 7.7
collision_base_size = 4.66
visibility_rect = Rect2(-900, -400, 900, 1200)
process_material = SubResource("ParticleProcessMaterial_oesqg")

[node name="GPUParticles2D4" type="GPUParticles2D" parent="foreground"]
position = Vector2(3714, 123)
amount = 20
texture = ExtResource("6_oesqg")
lifetime = 10.0
preprocess = 5.13
speed_scale = 7.7
collision_base_size = 4.66
visibility_rect = Rect2(-900, -400, 900, 1200)
process_material = SubResource("ParticleProcessMaterial_oesqg")

[node name="StoryDropsManager" type="Node2D" parent="foreground"]
script = ExtResource("13_a7ivt")
min_delay = 5.0
max_delay = 10.0

[node name="StoryDrop" parent="foreground/StoryDropsManager" node_paths=PackedStringArray("narrative") instance=ExtResource("11_8q7ur")]
position = Vector2(6, -438.99994)
narrative = NodePath("narrative")

[node name="narrative" type="Node" parent="foreground/StoryDropsManager/StoryDrop"]
script = SubResource("GDScript_aj2qc")

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
position = Vector2(2119, 755)
stream = ExtResource("15_gs6ay")
volume_db = -8.667
autoplay = true
parameters/looping = true

[node name="PostProcessingNode" type="Node" parent="."]
script = ExtResource("19_ih1jb")
